import{c as Ee,a as V,b as te,f as Re,d as O,A as T,t as _e,p as _,e as Ie,s as Oe,g as Ae,u as Me,h as Pe,r as l,j as e,L as De,i as se,k as u,l as y,m as z,n as I,o as E,q as k,v as b,U as Te,R as $e,H as ae,w as oe,x as Ue,y as ze,z as Fe,C as F,T as ne,B as re,D as ie,Q as le,E as ce,F as X,G as He,I as Be,J as Ge,S as Ke,K as Ve,M as qe,N as Qe,O as Xe,P as Ze,V as We,W as Ye,X as Je,Y as et,Z as tt,_ as $,$ as st,a0 as at,a1 as ot,a2 as nt,a3 as rt,a4 as it,a5 as Z,a6 as lt,a7 as ct,a8 as dt}from"./vendor-bf12158c.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const ut="modulepreload",mt=function(t){return"/cetirizine/"+t},W={},gt=function(s,a,n){if(!a||a.length===0)return s();const o=document.getElementsByTagName("link");return Promise.all(a.map(r=>{if(r=mt(r),r in W)return;W[r]=!0;const i=r.endsWith(".css"),m=i?'[rel="stylesheet"]':"";if(!!n)for(let d=o.length-1;d>=0;d--){const N=o[d];if(N.href===r&&(!i||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${m}`))return;const f=document.createElement("link");if(f.rel=i?"stylesheet":ut,i||(f.as="script",f.crossOrigin=""),f.href=r,document.head.appendChild(f),i)return new Promise((d,N)=>{f.addEventListener("load",d),f.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>s())},H="api/LOGIN",de=V("api/LOGIN_REQUEST"),ue=V("api/LOGIN_SUCCESS"),A=V("api/LOGIN_FAILURE"),Y={loginPending:!1},ft=Ee(Y,t=>{t.addCase(de,(s,a)=>{s.loginPending=!0,s.error=void 0}).addCase(ue,(s,a)=>{s=Y,s.client=a.payload}).addCase(A,(s,a)=>{s.loginPending=!1,s.error=a.payload})});function ht(t){return t.login.error}async function xt(t,s,a){const n=await me(t,s,void 0,a);return window.localStorage.setItem("accessToken",n.getAccessToken()),window.localStorage.setItem("baseUrl",n.baseUrl),window.localStorage.setItem("userId",n.getUserId()),n}function*pt(t){if(yield _(de()),!t.baseUrl.startsWith("https://")){yield _(A("Homeserver url must start with https://"));return}if(!t.username){yield _(A("Username must be a non empty string"));return}if(!t.password){yield _(A("Password must be a non empty string"));return}try{const s=yield Ie(xt,t.baseUrl,t.username,t.password);yield _(ue(s))}catch(s){yield _(A(s.toString()));return}}function*Nt(){yield _e(H,pt)}function*jt(){yield te([Re(Nt)])}async function me(t,s,a,n){let o;try{o=global.indexedDB}catch{}let r=new O.MemoryStore({localStorage:window.localStorage});o&&(O.setCryptoStoreFactory(()=>new O.IndexedDBCryptoStore(o,"matrix-js-sdk:crypto")),r=new O.IndexedDBStore({indexedDB:o,localStorage:window.localStorage}),await r.startup());const i=await T.findClientConfig(t.replace("https://",""));if(i["m.homeserver"].state===T.FAIL_PROMPT)throw Error(i["m.homeserver"].error?.toString());i["m.homeserver"].state!==T.FAIL_ERROR&&i["m.homeserver"].base_url&&(t=i["m.homeserver"].base_url);const m=O.createClient({baseUrl:t,accessToken:a,userId:a?s:void 0,useAuthorizationHeader:!0,store:r});if(!a&&!n)throw Error("Missing password and accessToken. Unable to proceed");return a||await m.loginWithPassword(s,n),await m.initCrypto(),m}function*bt(){yield te([jt()])}const ge=Oe(),Ct=[ge],Lt=Ae({reducer:{login:ft},middleware:t=>[...t(),...Ct],preloadedState:await wt()});ge.run(bt);async function wt(){const t=window.localStorage,s=t.getItem("accessToken"),a=t.getItem("baseUrl"),n=t.getItem("userId");if(s&&a&&n)return{login:{client:await me(a,n,s),loginPending:!1}}}const vt=()=>Pe(),B=Me;const St=({type:t="button",style:s="primary",onClick:a,children:n,readonly:o})=>s==="secondary"?e.jsx("button",{disabled:o,onClick:a,className:"button bg-orange-400 hover:bg-orange-500 ease-out duration-150 disabled:bg-slate-200 disabled:cursor-not-allowed",type:t,children:n}):s==="abort"?e.jsx("button",{disabled:o,onClick:a,className:"button bg-red-400 hover:bg-red-500 ease-out duration-150 disabled:bg-slate-200 disabled:cursor-not-allowed",type:t,children:n}):e.jsx("button",{disabled:o,onClick:a,className:"button bg-green-400 hover:bg-green-500 ease-out duration-150 disabled:bg-slate-200 disabled:cursor-not-allowed",type:t,children:n}),kt=l.memo(St),yt=({children:t})=>e.jsx("h1",{className:"text-black font-bold text-xl",children:t}),Et=({placeholder:t,password:s=!1,autoFocus:a=!1,value:n,readonly:o,onChange:r})=>e.jsx("input",{disabled:o,className:"form-input rounded-lg disabled:bg-slate-200 disabled:cursor-not-allowed transition-colors ease-in-out delay-150",value:n,type:s?"password":"text",autoFocus:a,placeholder:t,onChange:r}),U=l.memo(Et);function Rt(){const t=B(d=>ht(d)),s=l.useDeferredValue(t),a=B(d=>d.login.loginPending),[n,o]=l.useState(""),[r,i]=l.useState(""),[m,h]=l.useState(""),f=vt();return e.jsxs("form",{className:"flex flex-col rounded-md shadow p-4 bg-white gap-2 min-w-[30rem]",onSubmit:d=>{d.preventDefault(),f({type:H,baseUrl:n,username:r,password:m})},children:[e.jsx(yt,{children:"Login"}),s?e.jsx("h2",{className:"text-red-500 font-normal text-sm",children:s}):e.jsx("div",{className:"min-h-[1.25rem]"}),e.jsx(U,{readonly:a,value:n,autoFocus:!0,placeholder:"Homeserver",onChange:d=>o(d.target.value)}),e.jsx(U,{readonly:a,value:r,placeholder:"Username",onChange:d=>i(d.target.value)}),e.jsx(U,{readonly:a,value:m,password:!0,placeholder:"Password",onChange:d=>h(d.target.value)}),e.jsx(kt,{readonly:a,style:"primary",type:"submit",onClick:()=>f({type:H,baseUrl:n,username:r,password:m}),children:"Login"})]})}function _t(){return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-img",children:e.jsx(Rt,{})})}const G=({avatarUrl:t,displayname:s,dm:a=!1,online:n=!1})=>t?e.jsxs("div",{className:"flex relative min-w-[2rem] min-h-[2rem] justify-center items-center m-0 mr-3 text-xl rounded-full text-white",children:[e.jsx("img",{className:"rounded-full w-8 h-8",alt:s,src:t}),a?n?e.jsx("div",{className:"bg-green-500 rounded-full w-3 h-3 absolute bottom-0 right-0"}):e.jsx("div",{className:"bg-red-500 rounded-full w-3 h-3 absolute bottom-0 right-0"}):e.jsx(e.Fragment,{})]}):e.jsxs("div",{className:"flex relative min-w-[2rem] min-h-[2rem] bg-orange-500 justify-center items-center m-0 mr-3 text-xl rounded-full text-white",children:[s[0].toUpperCase(),a?n?e.jsx("div",{className:"bg-green-500 rounded-full w-3 h-3 absolute bottom-0 right-0"}):e.jsx("div",{className:"bg-red-500 rounded-full w-3 h-3 absolute bottom-0 right-0"}):e.jsx(e.Fragment,{})]}),It=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,Ot=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,At=[t=>{const s=It.exec(t);return s&&{index:s.index,length:s[0].length,text:s[0],url:s[0]}},t=>{const s=Ot.exec(t);return s&&{index:s.index,length:s[0].length,text:s[0],url:`mailto:${s[0]}`}}];function Mt(){return e.jsx(De.AutoLinkPlugin,{matchers:At})}const P=1,Pt=new Set(["paragraph","quote","code","h1","h2","ul","ol"]),Dt={code:"Code Block",h1:"Large Heading",h2:"Small Heading",h3:"Heading",h4:"Heading",h5:"Heading",ol:"Numbered List",paragraph:"Normal",quote:"Quote",ul:"Bulleted List"};function J(){return e.jsx("div",{className:"divider"})}function ee(t,s){s?(t.style.opacity="1",t.style.top=`${s.top+s.height+window.pageYOffset+10}px`,t.style.left=`${s.left+window.pageXOffset-t.offsetWidth/2+s.width/2}px`):(t.style.opacity="0",t.style.top="-1000px",t.style.left="-1000px")}function Tt({editor:t}){const s=l.useRef(null),a=l.useRef(null),n=l.useRef(!1),[o,r]=l.useState(""),[i,m]=l.useState(!1),[h,f]=l.useState(null),d=l.useCallback(()=>{const c=u.$getSelection();if(u.$isRangeSelection(c)){const L=fe(c),w=L.getParent();b.$isLinkNode(w)?r(w.getURL()):b.$isLinkNode(L)?r(L.getURL()):r("")}const x=s.current,j=window.getSelection(),C=document.activeElement;if(x===null)return;const p=t.getRootElement();if(c!==null&&!j?.isCollapsed&&p!==null&&p.contains(j?.anchorNode)){const L=j?.getRangeAt(0);let w;if(j?.anchorNode===p){let R=p;for(;R.firstElementChild!=null;)R=R.firstElementChild;w=R.getBoundingClientRect()}else w=L?.getBoundingClientRect();n.current||ee(x,w),f(c)}else(!C||C.className!=="link-input")&&(ee(x,void 0),f(null),m(!1),r(""));return!0},[t]);l.useEffect(()=>z.mergeRegister(t.registerUpdateListener(({editorState:c})=>{c.read(()=>{d()})}),t.registerCommand(u.SELECTION_CHANGE_COMMAND,()=>(d(),!0),P)),[t,d]),l.useEffect(()=>{t.getEditorState().read(()=>{d()})},[t,d]),l.useEffect(()=>{i&&a.current&&a.current.focus()},[i]);const N=l.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer"},o);return e.jsx("div",{ref:s,className:"link-editor",children:i?e.jsx("input",{ref:a,className:"link-input",value:o,onChange:c=>{r(c.target.value)},onKeyDown:c=>{c.key==="Enter"?(c.preventDefault(),h!==null&&(o!==""&&t.dispatchCommand(b.TOGGLE_LINK_COMMAND,o),m(!1))):c.key==="Escape"&&(c.preventDefault(),m(!1))}}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"link-input",children:[N,e.jsx("div",{className:"link-edit",role:"button",tabIndex:0,onMouseDown:c=>c.preventDefault(),onClick:()=>{m(!0)}})]})})})}function $t({onChange:t,className:s,options:a,value:n}){return e.jsxs("select",{className:s,onChange:t,value:n,children:[e.jsx("option",{hidden:!0,value:""}),a.map(o=>e.jsx("option",{value:o,children:o},o))]})}function fe(t){const s=t.anchor,a=t.focus,n=t.anchor.getNode(),o=t.focus.getNode();return n===o?n:t.isBackward()?k.$isAtNodeEnd(a)?n:o:k.$isAtNodeEnd(s)?o:n}function Ut({editor:t,blockType:s,toolbarRef:a,setShowBlockOptionsDropDown:n}){const o=l.useRef(null);l.useEffect(()=>{const c=a.current,x=o.current;if(c!==null&&x!==null){const{top:j,left:C}=c.getBoundingClientRect();x.style.top=`${j+40}px`,x.style.left=`${C}px`}},[o,a]),l.useEffect(()=>{const c=o.current,x=a.current;if(c!==null&&x!==null){const j=C=>{const p=C.target;!c.contains(p)&&!x.contains(p)&&n(!1)};return document.addEventListener("click",j),()=>{document.removeEventListener("click",j)}}},[o,n,a]);const r=()=>{s!=="paragraph"&&t.update(()=>{const c=u.$getSelection();u.$isRangeSelection(c)&&k.$wrapNodes(c,()=>u.$createParagraphNode())}),n(!1)},i=()=>{s!=="h1"&&t.update(()=>{const c=u.$getSelection();u.$isRangeSelection(c)&&k.$wrapNodes(c,()=>I.$createHeadingNode("h1"))}),n(!1)},m=()=>{s!=="h2"&&t.update(()=>{const c=u.$getSelection();u.$isRangeSelection(c)&&k.$wrapNodes(c,()=>I.$createHeadingNode("h2"))}),n(!1)},h=()=>{s!=="ul"?t.dispatchCommand(y.INSERT_UNORDERED_LIST_COMMAND,void 0):t.dispatchCommand(y.REMOVE_LIST_COMMAND,void 0),n(!1)},f=()=>{s!=="ol"?t.dispatchCommand(y.INSERT_ORDERED_LIST_COMMAND,void 0):t.dispatchCommand(y.REMOVE_LIST_COMMAND,void 0),n(!1)},d=()=>{s!=="quote"&&t.update(()=>{const c=u.$getSelection();u.$isRangeSelection(c)&&k.$wrapNodes(c,()=>I.$createQuoteNode())}),n(!1)},N=()=>{s!=="code"&&t.update(()=>{const c=u.$getSelection();u.$isRangeSelection(c)&&k.$wrapNodes(c,()=>E.$createCodeNode())}),n(!1)};return e.jsxs("div",{className:"dropdown",ref:o,children:[e.jsxs("button",{className:"item",onClick:r,children:[e.jsx(ne,{className:"icon",size:20}),e.jsx("span",{className:"text",children:"Normal"}),s==="paragraph"&&e.jsx("span",{className:"active"})]}),e.jsxs("button",{className:"item",onClick:i,children:[e.jsx(ae,{className:"icon",size:20}),e.jsx("span",{className:"text",children:"Large Heading"}),s==="h1"&&e.jsx("span",{className:"active"})]}),e.jsxs("button",{className:"item",onClick:m,children:[e.jsx(oe,{className:"icon",size:20}),e.jsx("span",{className:"text",children:"Small Heading"}),s==="h2"&&e.jsx("span",{className:"active"})]}),e.jsxs("button",{className:"item",onClick:h,children:[e.jsx(ie,{className:"icon",size:20}),e.jsx("span",{className:"text",children:"Bullet List"}),s==="ul"&&e.jsx("span",{className:"active"})]}),e.jsxs("button",{className:"item",onClick:f,children:[e.jsx(re,{className:"icon",size:20}),e.jsx("span",{className:"text",children:"Numbered List"}),s==="ol"&&e.jsx("span",{className:"active"})]}),e.jsxs("button",{className:"item",onClick:d,children:[e.jsx(le,{className:"icon",size:20}),e.jsx("span",{className:"text",children:"Quote"}),s==="quote"&&e.jsx("span",{className:"active"})]}),e.jsxs("button",{className:"item",onClick:N,children:[e.jsx(F,{className:"icon",size:20}),e.jsx("span",{className:"text",children:"Code Block"}),s==="code"&&e.jsx("span",{className:"active"})]})]})}function zt(){const[t]=se.useLexicalComposerContext(),s=l.useRef(null),[a,n]=l.useState(!1),[o,r]=l.useState(!1),[i,m]=l.useState("paragraph"),[h,f]=l.useState(null),[d,N]=l.useState(!1),[c,x]=l.useState(""),[j,C]=l.useState(!1),[p,L]=l.useState(!1),[w,R]=l.useState(!1),[he,xe]=l.useState(!1),[pe,Ne]=l.useState(!1),[je,be]=l.useState(!1),[Ce,Le]=l.useState(!1),D=l.useCallback(()=>{const g=u.$getSelection();if(u.$isRangeSelection(g)){const v=g.anchor.getNode(),S=v.getKey()==="root"?v:v.getTopLevelElementOrThrow(),q=S.getKey();if(t.getElementByKey(q)!==null)if(f(q),y.$isListNode(S)){const M=z.$getNearestNodeOfType(v,y.ListNode),ye=M?M.getTag():S.getTag();m(ye)}else{const M=I.$isHeadingNode(S)?S.getTag():S.getType();m(M),E.$isCodeNode(S)&&x(S.getLanguage()||E.getDefaultCodeLanguage())}R(g.hasFormat("bold")),xe(g.hasFormat("italic")),Ne(g.hasFormat("underline")),be(g.hasFormat("strikethrough")),Le(g.hasFormat("code")),C(k.$isParentElementRTL(g));const Q=fe(g),ke=Q.getParent();b.$isLinkNode(ke)||b.$isLinkNode(Q)?L(!0):L(!1)}},[t]);l.useEffect(()=>z.mergeRegister(t.registerUpdateListener(({editorState:g})=>{g.read(()=>{D()})}),t.registerCommand(u.SELECTION_CHANGE_COMMAND,(g,v)=>(D(),!1),P),t.registerCommand(u.CAN_UNDO_COMMAND,g=>(n(g),!1),P),t.registerCommand(u.CAN_REDO_COMMAND,g=>(r(g),!1),P)),[t,D]);const we=l.useMemo(()=>E.getCodeLanguages(),[]),ve=l.useCallback(g=>{t.update(()=>{if(h!==null){const v=u.$getNodeByKey(h);E.$isCodeNode(v)&&v.setLanguage(g.target.value)}})},[t,h]),Se=l.useCallback(()=>{p?t.dispatchCommand(b.TOGGLE_LINK_COMMAND,null):t.dispatchCommand(b.TOGGLE_LINK_COMMAND,"https://")},[t,p]);return e.jsxs("div",{className:"toolbar",ref:s,children:[e.jsx("button",{disabled:!a,onClick:()=>{t.dispatchCommand(u.UNDO_COMMAND,void 0)},className:"toolbar-item spaced","aria-label":"Undo",children:e.jsx(Te,{className:"format",size:20})}),e.jsx("button",{disabled:!o,onClick:()=>{t.dispatchCommand(u.REDO_COMMAND,void 0)},className:"toolbar-item","aria-label":"Redo",children:e.jsx($e,{className:"format",size:20})}),e.jsx(J,{}),Pt.has(i)&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"toolbar-item block-controls",onClick:()=>N(!d),"aria-label":"Formatting Options",children:[i==="h1"?e.jsx(ae,{className:"icon",size:20}):i==="h2"?e.jsx(oe,{className:"icon",size:20}):i==="h3"?e.jsx(Ue,{className:"icon",size:20}):i==="h4"?e.jsx(ze,{className:"icon",size:20}):i==="h5"?e.jsx(Fe,{className:"icon",size:20}):i==="code"?e.jsx(F,{className:"icon",size:20}):i==="paragraph"?e.jsx(ne,{className:"icon",size:20}):i==="ol"?e.jsx(re,{className:"icon",size:20}):i==="ul"?e.jsx(ie,{className:"icon",size:20}):i==="quote"?e.jsx(le,{className:"icon",size:20}):e.jsx(e.Fragment,{}),e.jsx("span",{className:"text",children:Dt[i]}),e.jsx(ce,{size:20})]}),d&&X.createPortal(e.jsx(Ut,{editor:t,blockType:i,toolbarRef:s,setShowBlockOptionsDropDown:N}),document.body),e.jsx(J,{})]}),i==="code"?e.jsxs(e.Fragment,{children:[e.jsx($t,{className:"toolbar-item code-language",onChange:ve,options:we,value:c}),e.jsx("i",{className:"chevron-down inside"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{t.dispatchCommand(u.FORMAT_TEXT_COMMAND,"bold")},className:"toolbar-item spaced "+(w?"active":""),"aria-label":"Format Bold",children:e.jsx(He,{className:"format",size:20})}),e.jsx("button",{onClick:()=>{t.dispatchCommand(u.FORMAT_TEXT_COMMAND,"italic")},className:"toolbar-item spaced "+(he?"active":""),"aria-label":"Format Italics",children:e.jsx(Be,{className:"format",size:20})}),e.jsx("button",{onClick:()=>{t.dispatchCommand(u.FORMAT_TEXT_COMMAND,"underline")},className:"toolbar-item spaced "+(pe?"active":""),"aria-label":"Format Underline",children:e.jsx(Ge,{className:"format",size:20})}),e.jsx("button",{onClick:()=>{t.dispatchCommand(u.FORMAT_TEXT_COMMAND,"strikethrough")},className:"toolbar-item spaced "+(je?"active":""),"aria-label":"Format Strikethrough",children:e.jsx(Ke,{className:"format",size:20})}),e.jsx("button",{onClick:()=>{t.dispatchCommand(u.FORMAT_TEXT_COMMAND,"code")},className:"toolbar-item spaced "+(Ce?"active":""),"aria-label":"Insert Code",children:e.jsx(F,{className:"format",size:20})}),e.jsx("button",{onClick:Se,className:"toolbar-item spaced "+(p?"active":""),"aria-label":"Insert Link",children:e.jsx(Ve,{className:"format",size:20})}),p&&X.createPortal(e.jsx(Tt,{editor:t}),document.body)," "]})]})}function Ft(){const[t]=se.useLexicalComposerContext();return l.useEffect(()=>E.registerCodeHighlighting(t),[t]),null}const Ht={ltr:"ltr",rtl:"rtl",placeholder:"editor-placeholder",paragraph:"editor-paragraph",quote:"editor-quote",heading:{h1:"editor-heading-h1",h2:"editor-heading-h2",h3:"editor-heading-h3",h4:"editor-heading-h4",h5:"editor-heading-h5"},list:{nested:{listitem:"editor-nested-listitem"},ol:"editor-list-ol",ul:"editor-list-ul",listitem:"editor-listitem"},image:"editor-image",link:"editor-link",text:{bold:"editor-text-bold",italic:"editor-text-italic",overflowed:"editor-text-overflowed",hashtag:"editor-text-hashtag",underline:"editor-text-underline",strikethrough:"editor-text-strikethrough",underlineStrikethrough:"editor-text-underlineStrikethrough",code:"editor-text-code"},code:"editor-code",codeHighlight:{atrule:"editor-tokenAttr",attr:"editor-tokenAttr",boolean:"editor-tokenProperty",builtin:"editor-tokenSelector",cdata:"editor-tokenComment",char:"editor-tokenSelector",class:"editor-tokenFunction","class-name":"editor-tokenFunction",comment:"editor-tokenComment",constant:"editor-tokenProperty",deleted:"editor-tokenProperty",doctype:"editor-tokenComment",entity:"editor-tokenOperator",function:"editor-tokenFunction",important:"editor-tokenVariable",inserted:"editor-tokenSelector",keyword:"editor-tokenAttr",namespace:"editor-tokenVariable",number:"editor-tokenProperty",operator:"editor-tokenOperator",prolog:"editor-tokenComment",property:"editor-tokenProperty",punctuation:"editor-tokenPunctuation",regex:"editor-tokenVariable",selector:"editor-tokenSelector",string:"editor-tokenSelector",symbol:"editor-tokenProperty",tag:"editor-tokenProperty",url:"editor-tokenOperator",variable:"editor-tokenVariable"}};function Bt(){return e.jsx("div",{className:"editor-placeholder",id:"editor-placeholder",children:"Enter message..."})}const Gt=({namespace:t,onChange:s,onError:a})=>{const n={namespace:t,theme:Ht,onError:a,nodes:[I.HeadingNode,y.ListNode,y.ListItemNode,I.QuoteNode,E.CodeNode,E.CodeHighlightNode,$.TableNode,$.TableCellNode,$.TableRowNode,b.AutoLinkNode,b.LinkNode]};return e.jsx(qe.LexicalComposer,{initialConfig:n,children:e.jsxs("div",{className:"editor-container",children:[e.jsx(zt,{}),e.jsxs("div",{className:"editor-inner",children:[e.jsx(Qe.RichTextPlugin,{contentEditable:e.jsx(Xe.ContentEditable,{className:"editor-input","aria-labelledby":"editor-placeholder"}),placeholder:e.jsx(Bt,{}),ErrorBoundary:Ze}),e.jsx(We.OnChangePlugin,{onChange:s}),e.jsx(Ye.HistoryPlugin,{}),e.jsx(Je.LinkPlugin,{}),e.jsx(Ft,{}),e.jsx(Mt,{}),e.jsx(et.MarkdownShortcutPlugin,{transformers:tt.TRANSFORMERS})]})]})})},Kt=({avatarUrl:t,displayname:s,dm:a=!1,online:n=!1,active:o=!1,onClick:r,hidden:i})=>{const{ref:m,inView:h}=st({triggerOnce:!0,rootMargin:"200px 0px",skip:i});return e.jsx("div",{ref:m,onClick:r,className:"w-full cursor-pointer",children:h&&(o?e.jsxs("div",{className:"flex flex-row gap-2 p-1 bg-gray-300 hover:bg-gray-400 rounded-lg duration-200 ease-in-out items-center",children:[e.jsx(G,{avatarUrl:t,displayname:s,dm:a,online:n}),e.jsx("span",{title:s,className:"text-slate-900 font-normal text-base capitalize max-w-[32ch] overflow-hidden text-ellipsis w-full whitespace-nowrap",children:s})]}):e.jsxs("div",{className:"flex flex-row gap-2 p-1 hover:bg-gray-300 rounded-lg duration-200 ease-in-out items-center",children:[e.jsx(G,{avatarUrl:t,displayname:s,dm:a,online:n}),e.jsx("span",{title:s,className:"text-slate-900 font-normal text-base capitalize max-w-[32ch] overflow-hidden text-ellipsis w-full whitespace-nowrap",children:s})]}))})},Vt=({sectionID:t,rooms:s,onClick:a,activeRoom:n,hidden:o})=>{const r=s.map(i=>e.jsx(Kt,{hidden:o,avatarUrl:i.avatarUrl,displayname:i.displayname,dm:i.dm,online:i.online,active:i.roomID===n,onClick:()=>{a(i.roomID)}},i.roomID+t));return e.jsx(e.Fragment,{children:r})},K=({section:t,onRoomClick:s,activeRoom:a})=>{const[n,o]=l.useState(!1);return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex flex-row gap-2 py-1  items-center justify-start cursor-pointer h-8 text-slate-600",onClick:()=>o(r=>!r),children:[n?e.jsx(at,{size:14}):e.jsx(ce,{size:14}),e.jsx("span",{className:"font-normal text-sm capitalize max-w-[32ch] overflow-hidden text-ellipsis w-full whitespace-nowrap",children:t.sectionName})]}),!n&&e.jsx(Vt,{hidden:n,sectionID:t.roomID,rooms:t.rooms,onClick:s,activeRoom:a}),!n&&t.subsections.map(r=>e.jsx(K,{section:r,onRoomClick:s,activeRoom:a},r.roomID))]},t.roomID)},qt=({sections:t,rooms:s})=>{const[a,n]=l.useState(void 0);return e.jsxs("div",{className:"flex flex-col gap-1 flex-1 px-2 min-w-[33ch]",children:[t.map(o=>e.jsx(K,{section:o,onRoomClick:r=>{n(r)},activeRoom:a},o.roomID)),e.jsx(K,{section:{sectionName:"Others",roomID:"other",subsections:[],rooms:s},onRoomClick:o=>{n(o)},activeRoom:a})]})};function Qt(){const t=[{sectionName:"Test Section",rooms:[{roomID:"2",displayname:"test1",dm:!1,online:!1},{roomID:"3",displayname:"test2",dm:!1,online:!1}],roomID:"12",subsections:[{sectionName:"Test Subsection",rooms:[{roomID:"1",displayname:"test",avatarUrl:"https://randomuser.me/api/portraits/men/62.jpg",dm:!0,online:!0}],roomID:"14",subsections:[]}]}],s=[{roomID:"1",displayname:"test1234144222222",avatarUrl:"https://randomuser.me/api/portraits/men/62.jpg",dm:!0,online:!0},{roomID:"2",displayname:"test1",dm:!1,online:!1},{roomID:"3",displayname:"test2",dm:!1,online:!1}];return e.jsxs("div",{className:"flex flex-row w-full gap-2 h-full",children:[e.jsxs("div",{className:"flex flex-col bg-gradient-to-br from-slate-100 via-gray-200 to-orange-200 border-r-[1px] border-slate-300",children:[e.jsxs("div",{className:"flex flex-row gap-2 m-2 p-1  items-center border-b-2",children:[e.jsx(G,{displayname:"Test",avatarUrl:"https://randomuser.me/api/portraits/men/62.jpg",dm:!1,online:!1}),e.jsxs("div",{className:"flex flex-row justify-between items-center w-full",children:[e.jsx("span",{className:"text-base font-semibold",children:"Abcd"}),e.jsx(ot,{size:28,stroke:"unset",className:"stroke-slate-600 rounded-full hover:bg-slate-300 p-1 cursor-pointer"})]})]}),e.jsx(qt,{sections:t,rooms:s})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"flex-1",children:"TODO: events and welcome page"}),e.jsx(Gt,{namespace:"Editor",onChange:()=>{},onError:a=>console.error(a)})]})]})}const Xt=({children:t})=>B(a=>a.login.client)?t:e.jsx(nt,{to:"login"});function Zt(){return e.jsx(rt,{children:e.jsxs(it,{children:[e.jsx(Z,{path:"/",element:e.jsx(Xt,{children:e.jsx(Qt,{})})}),e.jsx(Z,{path:"/login",element:e.jsx(_t,{})})]})})}const Wt=document.getElementById("root"),Yt=lt(Wt);window.Olm=await gt(()=>import("./olm-af71d43f.js").then(t=>t.o),["assets/olm-af71d43f.js","assets/vendor-bf12158c.js"]);Yt.render(e.jsx(ct.StrictMode,{children:e.jsx(dt,{store:Lt,children:e.jsx(Zt,{})})}));
