import{j as a}from"./jsx-runtime-ccada58e.js";import{A as N}from"./avatar-0d307b48.js";import{C as R}from"./input-4ff28d9b.js";import{R as j}from"./roomList-909b509c.js";import{u as b,a as S,b as _,M as y}from"./client-cf3c3aea.js";import{r as u}from"./index-f1f749bf.js";import{c as M}from"./chevron-down-2d8ad7a7.js";import"./index-67faaf7e.js";import"./_commonjsHelpers-042e6b4d.js";import"./roomListItem-46b5491b.js";const P=M("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const x=u.memo(()=>{const m=b(),i=S(),g=_(),h=u.useContext(y),D=[...i].filter(({spaceRoom:e})=>{const t=![...i].some(({children:s})=>[...s].some(r=>r.roomID===e.roomID)),n=e.getSpaceParentIDs().length===0;return t&&n}),v=[...g].filter(e=>{const t=![...i].some(({children:r})=>[...r].some(l=>l.roomID===e.roomID)),n=e.getSpaceParentIDs().length===0,s=!e.isSpace();return t&&n&&s}),I=D.map(e=>{const t=[...e.children].filter(s=>!s.isSpace()).map(s=>({roomID:s.roomID,displayname:s.getName(),avatarUrl:s.getAvatarURL(),dm:s.isDM(),online:s.isOnline()})),n=s=>{const r=[...i].find(l=>l.spaceRoom.roomID===s.roomID);if(r){const l=[...r?.children].map(o=>({roomID:o.roomID,displayname:o.getName(),avatarUrl:o.getAvatarURL(),dm:o.isDM(),online:o.isOnline()}));return{sectionName:s.getName(),rooms:l,roomID:s.roomID,subsections:[...r?.children].filter(o=>o.isSpace()).map(n).filter(o=>o!==void 0)}}};return{sectionName:e.spaceRoom.getName(),rooms:t,roomID:e.spaceRoom.roomID,subsections:[...e.children].filter(s=>s.isSpace()).map(n)}}),p=v.filter(e=>!e.isSpace()).map(e=>({roomID:e.roomID,displayname:e.getName(),avatarUrl:e.getAvatarURL(),dm:e.isDM(),online:e.isOnline()})),d=p.map(e=>e.roomID),f=d.filter((e,t)=>d.indexOf(e)!==t);return f.length>0&&console.error("otherRooms has duplicates",f),a.jsxs("div",{className:"flex flex-row w-full gap-2 min-h-screen h-screen",children:[a.jsxs("div",{className:"flex flex-col bg-gradient-to-br from-slate-100 via-gray-200 to-orange-200 border-r-[1px] border-slate-300",children:[a.jsxs("div",{className:"flex flex-row gap-2 m-2 p-1 items-center border-b-2",children:[a.jsx(N,{displayname:m.displayname||h.mxid,avatarUrl:m?.avatar_url,dm:!1,online:!1}),a.jsxs("div",{className:"flex flex-row justify-between items-center w-full",children:[a.jsx("span",{className:"text-base font-semibold",children:m?.displayname}),a.jsx(P,{size:28,stroke:"unset",className:"stroke-slate-600 rounded-full hover:bg-slate-300 p-1 cursor-pointer"})]})]}),a.jsx(j,{sections:I,rooms:p})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"flex-1"}),a.jsx(R,{namespace:"Editor",onChange:()=>{},onError:e=>console.error(e)})]})]})});x.__docgenInfo={description:"",methods:[],displayName:"MainPage"};const q={title:"Pages/MainPage",tags:["autodocs"],component:x},c={};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:"{}",...c.parameters?.docs?.source}}};const W=["Default"];export{c as Default,W as __namedExportsOrder,q as default};
//# sourceMappingURL=MainPage.stories-357966f2.js.map
