import{j as l}from"./jsx-runtime-ccada58e.js";import{r as p}from"./index-f1f749bf.js";import{A as I}from"./avatar-89f1ae75.js";const y=new Map,g=new WeakMap;let V=0,A;function E(e){return e?(g.has(e)||(V+=1,g.set(e,V.toString())),g.get(e)):"0"}function N(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?E(e.root):e[t]}`).toString()}function S(e){let t=N(e),s=y.get(t);if(!s){const i=new Map;let u;const o=new IntersectionObserver(n=>{n.forEach(r=>{var a;const h=r.isIntersecting&&u.some(c=>r.intersectionRatio>=c);e.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=h),(a=i.get(r.target))==null||a.forEach(c=>{c(h,r)})})},e);u=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:t,observer:o,elements:i},y.set(t,s)}return s}function M(e,t,s={},i=A){if(typeof window.IntersectionObserver>"u"&&i!==void 0){const a=e.getBoundingClientRect();return t(i,{isIntersecting:i,target:e,intersectionRatio:typeof s.threshold=="number"?s.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:u,observer:o,elements:n}=S(s);let r=n.get(e)||[];return n.has(e)||n.set(e,r),r.push(t),o.observe(e),function(){r.splice(r.indexOf(t),1),r.length===0&&(n.delete(e),o.unobserve(e)),n.size===0&&(o.disconnect(),y.delete(u))}}function O({threshold:e,delay:t,trackVisibility:s,rootMargin:i,root:u,triggerOnce:o,skip:n,initialInView:r,fallbackInView:a,onChange:h}={}){var c;const[m,q]=p.useState(null),v=p.useRef(),[x,R]=p.useState({inView:!!r,entry:void 0});v.current=h,p.useEffect(()=>{if(n||!m)return;let f;return f=M(m,(j,w)=>{R({inView:j,entry:w}),v.current&&v.current(j,w),w.isIntersecting&&o&&f&&(f(),f=void 0)},{root:u,rootMargin:i,threshold:e,trackVisibility:s,delay:t},a),()=>{f&&f()}},[Array.isArray(e)?e.toString():e,m,u,i,o,n,s,a,t]);const b=(c=x.entry)==null?void 0:c.target,T=p.useRef();!m&&b&&!o&&!n&&T.current!==b&&(T.current=b,R({inView:!!r,entry:void 0}));const d=[q,x.inView,x.entry];return d.ref=d[0],d.inView=d[1],d.entry=d[2],d}const _=({avatarUrl:e,displayname:t,dm:s=!1,online:i=!1,active:u=!1,onClick:o,hidden:n})=>{const{ref:r,inView:a}=O({triggerOnce:!0,rootMargin:"200px 0px",skip:n});return l.jsx("div",{ref:r,onClick:o,className:"w-full cursor-pointer",children:a&&(u?l.jsxs("div",{className:"flex flex-row gap-2 p-1 bg-gray-300 hover:bg-gray-400 rounded-lg duration-200 ease-in-out items-center",children:[l.jsx(I,{avatarUrl:e,displayname:t,dm:s,online:i}),l.jsx("span",{title:t,className:"text-slate-900 font-normal text-base capitalize max-w-[32ch] overflow-hidden text-ellipsis w-full whitespace-nowrap",children:t})]}):l.jsxs("div",{className:"flex flex-row gap-2 p-1 hover:bg-gray-300 rounded-lg duration-200 ease-in-out items-center",children:[l.jsx(I,{avatarUrl:e,displayname:t,dm:s,online:i}),l.jsx("span",{title:t,className:"text-slate-900 font-normal text-base capitalize max-w-[32ch] overflow-hidden text-ellipsis w-full whitespace-nowrap",children:t})]}))})};_.__docgenInfo={description:"",methods:[],displayName:"RoomListItem",props:{dm:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Wether it is a DM or not"},online:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Wether the user is online. Only used if dm is true."},active:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Wether the current room is selected"},avatarUrl:{required:!1,tsType:{name:"string"},description:"The URL of the Avatar image"},displayname:{required:!0,tsType:{name:"string"},description:"The displayname of the room list item"},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"The onClick handler"},hidden:{required:!0,tsType:{name:"boolean"},description:"If room is hidden"}}};export{_ as R};
//# sourceMappingURL=roomListItem-1c93a89f.js.map
