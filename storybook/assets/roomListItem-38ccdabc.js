import{j as c}from"./jsx-runtime-ccada58e.js";import{r as f}from"./index-f1f749bf.js";import{A as j}from"./avatar-aa8bc704.js";import{M as C}from"./client-2b9ca05c.js";const R=new Map,g=new WeakMap;let V=0,A;function M(e){return e?(g.has(e)||(V+=1,g.set(e,V.toString())),g.get(e)):"0"}function E(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?M(e.root):e[t]}`).toString()}function N(e){let t=E(e),r=R.get(t);if(!r){const o=new Map;let u;const a=new IntersectionObserver(s=>{s.forEach(n=>{var i;const m=n.isIntersecting&&u.some(d=>n.intersectionRatio>=d);e.trackVisibility&&typeof n.isVisible>"u"&&(n.isVisible=m),(i=o.get(n.target))==null||i.forEach(d=>{d(m,n)})})},e);u=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:a,elements:o},R.set(t,r)}return r}function S(e,t,r={},o=A){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const i=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}const{id:u,observer:a,elements:s}=N(r);let n=s.get(e)||[];return s.has(e)||s.set(e,n),n.push(t),a.observe(e),function(){n.splice(n.indexOf(t),1),n.length===0&&(s.delete(e),a.unobserve(e)),s.size===0&&(a.disconnect(),R.delete(u))}}function O({threshold:e,delay:t,trackVisibility:r,rootMargin:o,root:u,triggerOnce:a,skip:s,initialInView:n,fallbackInView:i,onChange:m}={}){var d;const[p,q]=f.useState(null),v=f.useRef(),[x,y]=f.useState({inView:!!n,entry:void 0});v.current=m,f.useEffect(()=>{if(s||!p)return;let h;return h=S(p,(I,b)=>{y({inView:I,entry:b}),v.current&&v.current(I,b),b.isIntersecting&&a&&h&&(h(),h=void 0)},{root:u,rootMargin:o,threshold:e,trackVisibility:r,delay:t},i),()=>{h&&h()}},[Array.isArray(e)?e.toString():e,p,u,o,a,s,r,i,t]);const w=(d=x.entry)==null?void 0:d.target,T=f.useRef();!p&&w&&!a&&!s&&T.current!==w&&(T.current=w,y({inView:!!n,entry:void 0}));const l=[q,x.inView,x.entry];return l.ref=l[0],l.inView=l[1],l.entry=l[2],l}const _=f.memo(({roomId:e,avatarUrl:t,displayname:r,dm:o=!1,online:u=!1,active:a=!1,onClick:s,hidden:n})=>{const i=f.useContext(C),{ref:m,inView:d}=O({triggerOnce:!0,rootMargin:"200px 0px",skip:n,onChange(p){p?i.addInViewRoom(e):i.removeInViewRoom(e)}});return c.jsx("div",{ref:m,onClick:s,className:"w-full cursor-pointer",children:d&&(a?c.jsxs("div",{className:"flex flex-row gap-2 p-1 bg-gray-300 hover:bg-gray-400 rounded-lg duration-200 ease-in-out items-center",children:[c.jsx(j,{avatarUrl:t,displayname:r,dm:o,online:u}),c.jsx("span",{title:r,className:"text-slate-900 font-normal text-base max-w-[32ch] overflow-hidden text-ellipsis w-full whitespace-nowrap",children:r})]}):c.jsxs("div",{className:"flex flex-row gap-2 p-1 hover:bg-gray-300 rounded-lg duration-200 ease-in-out items-center",children:[c.jsx(j,{avatarUrl:t,displayname:r,dm:o,online:u}),c.jsx("span",{title:r,className:"text-slate-900 font-normal text-base max-w-[32ch] overflow-hidden text-ellipsis w-full whitespace-nowrap",children:r})]}))})});_.__docgenInfo={description:"",methods:[],displayName:"RoomListItem",props:{dm:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Wether it is a DM or not"},online:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Wether the user is online. Only used if dm is true."},active:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Wether the current room is selected"},roomId:{required:!0,tsType:{name:"string"},description:"Room id"},avatarUrl:{required:!1,tsType:{name:"string"},description:"The URL of the Avatar image"},displayname:{required:!0,tsType:{name:"string"},description:"The displayname of the room list item"},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"The onClick handler"},hidden:{required:!0,tsType:{name:"boolean"},description:"If room is hidden"}}};export{_ as R};
//# sourceMappingURL=roomListItem-38ccdabc.js.map
