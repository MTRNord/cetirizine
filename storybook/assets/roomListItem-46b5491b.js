import{j as m}from"./jsx-runtime-ccada58e.js";import{r as c}from"./index-f1f749bf.js";import{A as j}from"./avatar-0d307b48.js";import{M as A}from"./client-cf3c3aea.js";const R=new Map,g=new WeakMap;let V=0,C;function E(e){return e?(g.has(e)||(V+=1,g.set(e,V.toString())),g.get(e)):"0"}function M(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?E(e.root):e[t]}`).toString()}function N(e){let t=M(e),r=R.get(t);if(!r){const i=new Map;let u;const o=new IntersectionObserver(n=>{n.forEach(s=>{var a;const l=s.isIntersecting&&u.some(d=>s.intersectionRatio>=d);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=l),(a=i.get(s.target))==null||a.forEach(d=>{d(l,s)})})},e);u=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:i},R.set(t,r)}return r}function S(e,t,r={},i=C){if(typeof window.IntersectionObserver>"u"&&i!==void 0){const a=e.getBoundingClientRect();return t(i,{isIntersecting:i,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:u,observer:o,elements:n}=N(r);let s=n.get(e)||[];return n.has(e)||n.set(e,s),s.push(t),o.observe(e),function(){s.splice(s.indexOf(t),1),s.length===0&&(n.delete(e),o.unobserve(e)),n.size===0&&(o.disconnect(),R.delete(u))}}function O({threshold:e,delay:t,trackVisibility:r,rootMargin:i,root:u,triggerOnce:o,skip:n,initialInView:s,fallbackInView:a,onChange:l}={}){var d;const[h,q]=c.useState(null),v=c.useRef(),[x,y]=c.useState({inView:!!s,entry:void 0});v.current=l,c.useEffect(()=>{if(n||!h)return;let p;return p=S(h,(I,b)=>{y({inView:I,entry:b}),v.current&&v.current(I,b),b.isIntersecting&&o&&p&&(p(),p=void 0)},{root:u,rootMargin:i,threshold:e,trackVisibility:r,delay:t},a),()=>{p&&p()}},[Array.isArray(e)?e.toString():e,h,u,i,o,n,r,a,t]);const w=(d=x.entry)==null?void 0:d.target,T=c.useRef();!h&&w&&!o&&!n&&T.current!==w&&(T.current=w,y({inView:!!s,entry:void 0}));const f=[q,x.inView,x.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}const _=c.memo(({roomId:e,avatarUrl:t,displayname:r,dm:i=!1,online:u=!1,active:o=!1,onClick:n,hidden:s})=>{const{ref:a,inView:l}=O({triggerOnce:!0,rootMargin:"200px 0px",skip:s}),d=c.useContext(A);return c.useEffect(()=>{l?d.addInViewRoom(e):d.removeInViewRoom(e)},[l]),m.jsx("div",{ref:a,onClick:n,className:"w-full cursor-pointer",children:l&&(o?m.jsxs("div",{className:"flex flex-row gap-2 p-1 bg-gray-300 hover:bg-gray-400 rounded-lg duration-200 ease-in-out items-center",children:[m.jsx(j,{avatarUrl:t,displayname:r,dm:i,online:u}),m.jsx("span",{title:r,className:"text-slate-900 font-normal text-base capitalize max-w-[32ch] overflow-hidden text-ellipsis w-full whitespace-nowrap",children:r})]}):m.jsxs("div",{className:"flex flex-row gap-2 p-1 hover:bg-gray-300 rounded-lg duration-200 ease-in-out items-center",children:[m.jsx(j,{avatarUrl:t,displayname:r,dm:i,online:u}),m.jsx("span",{title:r,className:"text-slate-900 font-normal text-base capitalize max-w-[32ch] overflow-hidden text-ellipsis w-full whitespace-nowrap",children:r})]}))})});_.__docgenInfo={description:"",methods:[],displayName:"RoomListItem",props:{dm:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Wether it is a DM or not"},online:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Wether the user is online. Only used if dm is true."},active:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Wether the current room is selected"},roomId:{required:!0,tsType:{name:"string"},description:"Room id"},avatarUrl:{required:!1,tsType:{name:"string"},description:"The URL of the Avatar image"},displayname:{required:!0,tsType:{name:"string"},description:"The displayname of the room list item"},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"The onClick handler"},hidden:{required:!0,tsType:{name:"boolean"},description:"If room is hidden"}}};export{_ as R};
//# sourceMappingURL=roomListItem-46b5491b.js.map
